<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <%- include('partials/header') %>

    <h2>Current Orders</h2>
    <% orders.forEach(order => { %>
        <section class="order-card">
            <p><strong>Date:</strong> <%= order.date.toDateString() %></p>
            <p><strong>Total:</strong> £<%= order.total %></p>
            <p><strong>Fast-Track Rides:</strong> <%= order.fastRides.join(", ") || "None" %></p>
            
            <% if (!order.confirmed) { %>
                <form action="/orders/add-ride" method="POST">
                    <input type="hidden" name="orderId" value="<%= order._id %>">
                    <label for="ride">Add Fast-Track Ride:</label>
                    <select name="ride">
                        <% rides.forEach(ride => { %>
                            <option value="<%= ride.name %>"><%= ride.name %> (£<%= ride.cost %>)</option>
                        <% }) %>
                    </select>
                    <button type="submit">Add Ride</button>
                </form>

                <form action="/orders/confirm/<%= order._id %>" method="GET">
                    <button type="submit">Buy Ticket</button>
                </form>
            <% } else { %>
                <p>Status: Confirmed</p>
            <% } %>
        </section>
    <% }) %>

    <a href="/orders/history">View previous orders</a>

    <%- include('partials/footer') %>

</body>
</html>